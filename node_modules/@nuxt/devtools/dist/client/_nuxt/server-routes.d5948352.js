import{d as ae,r as q,bm as $e,o as t,m as y,k as u,G as L,h as w,f as e,bn as se,t as O,p as D,v as W,a9 as We,aa as Z,F as N,n as B,a6 as fe,a0 as Je,a as T,w as Se,i as h,j as $,X as Te,_ as me,bo as Ve,bp as Re,ay as Ke,bq as Qe,br as Xe,bs as Ye,ab as Ze,au as et,aw as pe,ac as tt,az as ot,e as nt,a2 as Ue,l as Y,I as le,at as st,V as lt,A as De,bt as at,bu as rt,ah as it,U as ut,bv as dt,ao as ct}from"./entry.35c58391.js";import{_ as pt}from"./NNavbar.vue.a82b9c01.js";import{_ as Ne}from"./NBadge.ce033599.js";import{_ as Ie}from"./NSelect.vue.7cf27fe7.js";import{_ as ft}from"./NCheckbox.vue.0f5a8440.js";import{u as Ee,_ as mt}from"./storage-options.835c9b2d.js";import{_ as vt}from"./DataSchemaButton.vue.baec9a00.js";import{_ as ht}from"./NCodeBlock.vue.4697f7e4.js";import{C as xe,S as je}from"./constants.2cc6e981.js";import{t as yt}from"./json-editor-vue.24ac60a9.js";import{_ as gt}from"./NSectionBlock.1609c1ec.js";import{_ as _t}from"./NDrawer.vue.4b4bd813.js";import"./client.bd4053bc.js";import"./NIconTitle.vue.8be5866f.js";const ne=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function bt(l,g){if(typeof l!="string")throw new TypeError("argument str must be a string");const d={},b=(g||{}).decode||Ct;let k=0;for(;k<l.length;){const f=l.indexOf("=",k);if(f===-1)break;let m=l.indexOf(";",k);if(m===-1)m=l.length;else if(m<f){k=l.lastIndexOf(";",f-1)+1;continue}const s=l.slice(k,f).trim();if(d[s]===void 0){let c=l.slice(f+1,m).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),d[s]=xt(c,b)}k=m+1}return d}function Ce(l,g,d){const o=d||{},b=o.encode||wt;if(typeof b!="function")throw new TypeError("option encode is invalid");if(!ne.test(l))throw new TypeError("argument name is invalid");const k=b(g);if(k&&!ne.test(k))throw new TypeError("argument val is invalid");let f=l+"="+k;if(o.maxAge!==void 0&&o.maxAge!==null){const m=o.maxAge-0;if(Number.isNaN(m)||!Number.isFinite(m))throw new TypeError("option maxAge is invalid");f+="; Max-Age="+Math.floor(m)}if(o.domain){if(!ne.test(o.domain))throw new TypeError("option domain is invalid");f+="; Domain="+o.domain}if(o.path){if(!ne.test(o.path))throw new TypeError("option path is invalid");f+="; Path="+o.path}if(o.expires){if(!kt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");f+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(f+="; HttpOnly"),o.secure&&(f+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":f+="; Priority=Low";break;case"medium":f+="; Priority=Medium";break;case"high":f+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"strict":f+="; SameSite=Strict";break;case"none":f+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return f}function kt(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}function xt(l,g){try{return g(l)}catch{return l}}function Ct(l){return l.includes("%")?decodeURIComponent(l):l}function wt(l){return encodeURIComponent(l)}const $t=u("div",{"x-divider":""},null,-1),Oe=ae({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(l){const g=q(!0),d=$e();return(o,b)=>{const k=fe,f=Ne,m=Oe;return t(),y("div",null,[u("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:L([{"bg-active":e(d)===o.item.filepath}]),style:We({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:b[0]||(b[0]=s=>{g.value=!e(g),d.value=o.item.filepath})},[u("div",{class:L({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(t(),w(k,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(g)?90:0,transition:""},null,8,["transform-rotate"])):(t(),w(f,{key:1,class:L(("getRequestMethodClass"in o?o.getRequestMethodClass:e(se))(o.item.method||"*")),textContent:O((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),u("span",{class:L({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(t(),w(k,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):D("",!0),W(" "+O(o.item.route),1)],2)],6),$t,e(g)?Z(o.$slots,"default",{key:0},()=>[(t(!0),y(N,null,B(o.item.routes,s=>(t(),w(m,{key:s.filepath,item:s,index:o.index+1},null,8,["item","index"]))),128))]):D("",!0)])}}}),St={p4:"",flex:"~ col gap-4"},Tt={key:1,ml2:"",flex:""},Vt=["value"],Rt={key:0,flex:"","gap-4":""},Ut=u("div",{"flex-auto":""},null,-1),Le=ae({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(l,{emit:g}){const d=l,b=Je(d,"modelValue",g,{passive:!0}),k=T(()=>[...d.keys,"active","key","value","type"]),f=T(()=>{const c={};for(const a of k.value)c[a]=d.default[a]||"";return c}),m=["string","number","boolean","file","date","time","datetime-local"];function s(c,a){const I=a.target;if(I.files&&I.files[0]){const M=I.files[0],H=new FileReader;H.readAsDataURL(M),H.onload=()=>{b.value[c].value=H.result}}}return Se(()=>b,c=>{c.value.forEach(a=>{if(a.type==="number"&&typeof a.value!="number"){const I=Number.parseFloat(a.value);a.value=Number.isNaN(I)?0:I}else a.type==="boolean"&&typeof a.value!="boolean"?a.value=!0:a.type==="file"&&typeof a.value!="object"?a.value="":a.type==="date"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}$/)?a.value=new Date().toISOString().slice(0,10):a.type==="time"&&typeof a.value=="string"&&!a.value.match(/^\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(11,16):a.type==="datetime-local"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(0,16):a.type==="string"&&(a.value=a.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(c,a)=>{const I=ft,M=Te,H=Ie,S=fe,C=me;return t(),y("div",St,[(t(!0),y(N,null,B(e(b),(i,A)=>(t(),y("div",{key:A,flex:"~ gap-2","justify-around":""},[Z(c.$slots,"input",{item:i}),(t(!0),y(N,null,B(e(k),x=>(t(),y(N,{key:x},[i.type!==null&&x==="active"?(t(),w(I,{key:0,modelValue:i[x],"onUpdate:modelValue":_=>i[x]=_,n:"sm primary",disabled:c.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):D("",!0),i.type!==null&&x==="key"?(t(),w(M,{key:1,modelValue:i[x],"onUpdate:modelValue":_=>i[x]=_,placeholder:x,"flex-1":"","font-mono":"",n:"sm primary",disabled:c.disabled,class:L(c.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):x==="value"?(t(),y(N,{key:2},[i.type==="file"?(t(),w(M,{key:0,type:"file",disabled:c.disabled,class:L(c.disabled?"op75":""),onChange:_=>s(A,_)},null,8,["disabled","class","onChange"])):i.type==="boolean"?(t(),y("div",Tt,[h(I,{modelValue:i.value,"onUpdate:modelValue":_=>i.value=_,placeholder:"Value",n:"green lg",disabled:c.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(t(),w(M,{key:2,modelValue:i.value,"onUpdate:modelValue":_=>i.value=_,type:i.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:c.disabled,class:L(c.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):x==="type"?(t(),w(H,{key:3,modelValue:i.type,"onUpdate:modelValue":_=>i.type=_,n:"sm green",class:L(c.disabled?"op75":""),disabled:c.disabled},{default:$(()=>[(t(),y(N,null,B(m,_=>u("option",{key:_,value:_},O(_),9,Vt)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):D("",!0)],64))),128)),Z(c.$slots,"input-actions",{},()=>[h(C,{n:"red",disabled:c.disabled,class:L(c.disabled?"op0!":""),onClick:x=>e(b).splice(A,1)},{default:$(()=>[h(S,{icon:"carbon:trash-can"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),c.disabled?D("",!0):(t(),y("div",Rt,[Z(c.$slots,"actions",{params:e(b)},()=>[h(C,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:a[0]||(a[0]=i=>e(b).push({...e(f)}))},{default:$(()=>[W(" Add ")]),_:1}),Ut,e(b).length?(t(),w(C,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:a[1]||(a[1]=i=>b.value=[])},{default:$(()=>[W(" Remove All ")]),_:1})):D("",!0)])])),Z(c.$slots,"default")])}}}),Dt={path:"/",watch:!0,decode:l=>Xe(decodeURIComponent(l)),encode:l=>encodeURIComponent(typeof l=="string"?l:JSON.stringify(l))};function Nt(l,g){const d={...Dt,...g},o=It(d)||{};let b;d.maxAge!==void 0?b=d.maxAge*1e3:d.expires&&(b=d.expires.getTime()-Date.now());const k=b!==void 0&&b<=0,f=k?void 0:o[l]??d.default?.(),m=b&&!k?Ot(f,b):q(f);{const s=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${l}`),c=()=>{jt(l,m.value,d),s?.postMessage(d.encode(m.value))};let a=!1;Ve()&&Re(()=>{a=!0,c(),s?.close()}),s&&(s.onmessage=I=>{a=!0,m.value=d.decode(I.data),Ke(()=>{a=!1})}),d.watch?Se(m,()=>{a||c()},{deep:d.watch!=="shallow"}):c()}return m}function It(l={}){return bt(document.cookie,l)}function Et(l,g,d={}){return g==null?Ce(l,g,{...d,maxAge:-1}):Ce(l,g,d)}function jt(l,g,d={}){document.cookie=Et(l,g,d)}const we=2147483647;function Ot(l,g){let d,o=0;return Ve()&&Re(()=>{clearTimeout(d)}),Qe((b,k)=>{function f(){clearTimeout(d);const m=g-o,s=m<we?m:we;d=setTimeout(()=>{if(o+=s,o<g)return f();l=void 0,k()},s)}return{get(){return b(),l},set(m){f(),l=m,k()}}})}const Lt={"h-full":"","w-full":"",flex:"~ col"},At={flex:"~ col gap-2","flex-none":"",p4:"","n-navbar-glass":""},Pt={flex:"~ gap2 items-center"},qt={relative:"","w-full":""},Bt={absolute:"","right-2":"","top-1.5":"",flex:"~ gap-1"},Mt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Ft=u("div",{"flex-auto":""},null,-1),zt=u("div",{"text-xs":"",op50:""}," Send from ",-1),Ht=u("option",{value:"app"}," App ",-1),Gt=u("option",{value:"devtools"}," DevTools ",-1),Wt={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Jt={"text-right":"","font-mono":""},Kt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Qt={flex:"~ gap-4"},Xt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Yt=u("div",{"w-5":"","x-divider":""},null,-1),Zt=u("div",{"flex-none":""}," Default Inputs ",-1),eo=u("div",{"x-divider":""},null,-1),to={key:2},oo={key:3,border:"b base",relative:"","n-code-block":""},no={flex:"~ wrap","w-full":""},so=["onClick"],lo=u("div",{border:"b base","flex-auto":""},null,-1),ao={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},ro=u("div",null,"Response",-1),io={key:1,"text-xs":"",op50:""},uo=u("div",{"flex-auto":""},null,-1),co=u("div",{op50:""}," Request finished in ",-1),po={key:0,"flex-auto":"","overflow-auto":""},fo={border:"~ base","h-full":"","w-full":"",rounded:""},mo=["data"],vo={key:2,"flex-auto":"","overflow-auto":"",p4:""},ho={border:"~ base",rounded:""},yo=["src"],go={key:1,controls:"",rounded:""},_o=["src"],bo=ae({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(l,{emit:g}){const d=l,o=g,[b,k]=Ye(),f=Ze(),m=et(),s=pe({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),c=T(()=>s.contentType.includes("application/json")?"json":s.contentType.includes("text/html")?"html":s.contentType.includes("text/css")?"css":s.contentType.includes("text/javascript")?"javascript":s.contentType.includes("image")||s.contentType.includes("video")?"media":s.contentType.includes("text/xml")||s.contentType.includes("application/xml")?"xml":s.contentType.includes("application/pdf")?"pdf":"text"),a=T(()=>{if(c.value==="json")return JSON.stringify(s.data,null,2);if(c.value==="media"||c.value==="pdf"){const n=new Blob([s.data],{type:s.contentType});return URL.createObjectURL(n)}return s.data}),I=q(!1),M=q(!1),H=tt(),S=T(()=>d.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),C=T(()=>S.value?.filter(n=>n.startsWith(":")||n.startsWith("**:"))||[]),i=q(d.route.method||"GET"),A=q({}),x=pe({query:[{active:!0,key:"",value:"",type:"string"}],body:[{active:!0,key:"",value:"",type:"string"}],headers:[{active:!0,key:"Content-Type",value:"application/json",type:"string"}]}),_=q({}),{inputDefaults:R,sendFrom:F}=Ee("serverRoutes"),j=T(()=>m?.value?.app?.$fetch?F.value:"devtools"),re=["GET","POST","PUT","PATCH","DELETE","HEAD"],ie=["PATCH","POST","PUT","DELETE"],ee=T(()=>ie.includes(i.value.toUpperCase())),P=q(C.value.length?"params":"query"),V=["input","json"],G=q(V[0]),te=T({get:()=>x[P.value],set:n=>{x[P.value]=n}}),ve=T(()=>({...K(R.value.query),...K(x.query)})),he=T(()=>({...K(R.value.headers),...K(x.headers)})),ue=T(()=>ee.value?G.value==="json"?{...K(R.value.body),..._.value}:{...K(R.value.body),...K(x.body)}:void 0),Ae=T(()=>{let n=window?.location.origin;return n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1)),n}),oe=T(()=>{let n=new URLSearchParams(ve.value).toString();n&&(n=`?${n}`);const p=(S.value?.map(E=>(E.startsWith(":")||E.startsWith("**:"))&&A.value[E]||E).join("")||"")+n;let v=f.value?.app.baseURL||"";return(v==="./"||v===".")&&(v=""),v.endsWith("/")&&(v=v.slice(0,-1)),v+p}),ye=T(()=>Ae.value+oe.value);function K(n){const p=Object.fromEntries(n.filter(({active:v,key:E,value:U})=>v&&E&&U!==void 0).map(({key:v,value:E})=>[v,E]));return Object.entries(p).length?p:void 0}async function ge(){M.value=!0,I.value=!0;const n=Date.now(),p=j.value==="app"?m.value.app.$fetch:$fetch;lt("server-routes:fetch",{method:i.value,sendFrom:j.value});try{s.data=await p(ye.value,{method:i.value.toUpperCase(),headers:he.value,query:ve.value,body:ue.value,onResponse({response:v}){s.contentType=(v.headers.get("content-type")||"").toString().toLowerCase().trim(),s.statusCode=v.status,s.error=void 0},onResponseError(v){s.error=v.response._data,s.data=v.response._data}})}catch{}I.value=!1,s.fetchTime=Date.now()-n}const _e=T(()=>{const n=[],p=[],v=Object.entries(he.value).filter(([U,z])=>U&&z&&!(U==="Content-Type"&&z==="application/json")).map(([U,z])=>`  '${U}': '${z}'`).join(`,
`);i.value.toUpperCase()!=="GET"&&p.push(`method: '${i.value.toUpperCase()}'`),v&&p.push(`headers: {
${v}
}`),ue.value&&p.push(`body: ${JSON.stringify(ue.value,null,2)}`);const E=p.length?`, {
${p.join(`,
`).split(`
`).map(U=>`  ${U}`).join(`
`)}
}`:"";return n.push({name:"useFetch",lang:"javascript",docs:xe.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${oe.value}'${E})`}),n.push({name:"$fetch",lang:"javascript",docs:xe.nuxt.$fetch,code:`await $fetch('${oe.value}'${E})`}),n}),Q=q(qe()),J=pe({key:"",value:""}),Pe=T(()=>{const n=[];return C.value.length&&n.push({name:"Params",slug:"params",length:C.value.length}),n.push({name:"Query",slug:"query",length:x.query.length}),ee.value&&n.push({name:"Body",slug:"body",length:x.body.length}),n.push({name:"Headers",slug:"headers",length:x.headers.length}),n.push({name:"Cookies",slug:"cookies",length:Q.value.length}),n.push({name:"Snippets",slug:"snippet"}),n});function qe(){return document.cookie.split("; ").map(n=>{const[p,v]=n.split("=");return{key:p,value:v}}).filter(n=>n.key)}function de(n,p){if(!n)return;const v=Q.value.find(U=>U.key===n),E=Nt(n);v!==void 0?p===void 0&&(Q.value=Q.value.filter(U=>U.key!==n)):(Q.value.push({key:n,value:p}),J.key="",J.value=""),E.value=p}ot(()=>{G.value==="json"&&typeof _.value=="string"&&(_.value=JSON.parse(_.value))});const Be=nt();return(n,p)=>{const v=me,E=Ie,U=Te,z=fe,be=Le,Me=mt,Fe=De,ze=at,ce=Ne,He=vt,Ge=ht,ke=Ue("tooltip");return t(),y("div",Lt,[u("div",At,[u("div",Pt,[n.route.method?(t(),w(v,{key:0,class:L(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(i))]),"pointer-events-none":"","font-mono":"",tabindex:"-1"},{default:$(()=>[W(O(e(i).toUpperCase()),1)]),_:1},8,["class"])):(t(),w(E,{key:1,modelValue:e(i),"onUpdate:modelValue":p[0]||(p[0]=r=>Y(i)?i.value=r:null),class:L(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(i))])},{default:$(()=>[(t(),y(N,null,B(re,r=>u("option",{key:r,class:L(("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(r))},O(r.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),u("div",qt,[h(U,{"model-value":e(oe),readonly:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"sm"},null,8,["model-value"]),u("div",Bt,[le(h(v,{title:"Copy URL",n:"xs blue",icon:"carbon:copy",border:!1,onClick:p[1]||(p[1]=r=>e(Be)(e(ye),"server-route-url"))},null,512),[[ke,"Copy URL"]]),le(h(v,{title:"Open in Editor",icon:"carbon-launch",n:"xs blue",border:!1,onClick:p[2]||(p[2]=r=>e(H)(n.route.filepath))},null,512),[[ke,"Open in Editor"]])])]),h(v,{"h-full":"",n:"primary solid",onClick:ge},{default:$(()=>[h(z,{icon:"carbon:send"})]),_:1})])]),u("div",Mt,[(t(!0),y(N,null,B(e(Pe),r=>(t(),w(v,{key:r.slug,class:L(e(P)===r.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:X=>P.value=r.slug},{default:$(()=>[h(z,{icon:("ServerRouteTabIcons"in n?n.ServerRouteTabIcons:e(je))[r.slug]},null,8,["icon"]),W(" "+O(r.name)+" "+O(r?.length?`(${r.length})`:"")+" ",1),u("span",null,O(e(R)[r.slug]?.length?`(${e(R)[r.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),Ft,zt,h(E,{modelValue:e(j),"onUpdate:modelValue":p[3]||(p[3]=r=>Y(j)?j.value=r:null),class:"n-xs",disabled:!e(m)?.app?.$fetch},{default:$(()=>[Ht,Gt]),_:1},8,["modelValue","disabled"])]),e(P)==="params"?(t(),y("div",Wt,[(t(!0),y(N,null,B(e(C),r=>(t(),y(N,{key:r},[u("div",Jt,O(r),1),h(U,{modelValue:e(A)[r],"onUpdate:modelValue":X=>e(A)[r]=X,placeholder:r,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):D("",!0),e(P)==="cookies"?(t(),y("div",Kt,[(t(!0),y(N,null,B(e(Q),r=>(t(),y("div",{key:r.key,flex:"~ gap-4 items-center"},[h(U,{placeholder:"Key...","model-value":r.key,disabled:"","op-70":""},null,8,["model-value"]),h(U,{placeholder:"Value...","model-value":r.value,"flex-1":"",n:"primary",onInput:X=>de(r.key,X.target?.value)},null,8,["model-value","onInput"]),h(v,{title:"Delete",n:"red",onClick:X=>de(r.key,void 0)},{default:$(()=>[h(z,{icon:"i-carbon-trash-can"})]),_:2},1032,["onClick"])]))),128)),u("div",Qt,[h(U,{modelValue:e(J).key,"onUpdate:modelValue":p[4]||(p[4]=r=>e(J).key=r),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),h(U,{modelValue:e(J).value,"onUpdate:modelValue":p[5]||(p[5]=r=>e(J).value=r),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),h(v,{title:"Add",n:"primary",onClick:p[6]||(p[6]=r=>de(e(J).key,e(J).value))},{default:$(()=>[h(z,{icon:"i-carbon-save"})]),_:1})])])):D("",!0),h(e(b),null,{default:$(()=>[h(be,{modelValue:e(te),"onUpdate:modelValue":p[9]||(p[9]=r=>Y(te)?te.value=r:null),default:{active:!0,type:"string"},"max-h-xs":"","of-auto":""},{default:$(()=>[e(R)[e(P)]?.length?(t(),y(N,{key:0},[u("div",Xt,[Yt,Zt,h(v,{icon:"i-carbon-edit",border:!1,onClick:p[7]||(p[7]=r=>o("open-default-input"))}),eo]),h(be,{modelValue:e(R)[e(P)],"onUpdate:modelValue":p[8]||(p[8]=r=>e(R)[e(P)]=r),disabled:"",p0:""},null,8,["modelValue"])],64)):D("",!0)]),_:1},8,["modelValue"])]),_:1}),e(P)==="snippet"?(t(),y("div",to,[e(_e).length?(t(),w(Me,{key:0,"code-snippets":e(_e)},null,8,["code-snippets"])):D("",!0)])):e(te)?(t(),y("div",oo,[e(P)==="body"?(t(),y(N,{key:0},[u("div",no,[(t(),y(N,null,B(V,r=>u("button",{key:r,px4:"",py2:"",border:"r base",hover:"bg-active",class:L({"border-b":r!==e(G)}),onClick:X=>G.value=r},[u("div",{class:L({op30:r!==e(G)}),"font-mono":""},O(r),3)],10,so)),64)),lo]),e(G)==="input"?(t(),w(e(k),{key:0})):e(G)==="json"?(t(),w(e(yt),st({key:1,modelValue:e(_),"onUpdate:modelValue":p[10]||(p[10]=r=>Y(_)?_.value=r:null),class:[[n.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},n.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):D("",!0)],64)):(t(),w(e(k),{key:1}))])):D("",!0),e(M)?e(I)?(t(),w(ze,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:$(()=>[W(" Fetching... ")]),_:1})):(t(),y(N,{key:6},[u("div",ao,[ro,e(s).error?(t(),w(ce,{key:0,n:"red"},{default:$(()=>[W(" Error ")]),_:1})):D("",!0),h(ce,{n:e(s).error?"orange":"green",textContent:O(e(s).statusCode)},null,8,["n","textContent"]),e(s).contentType?(t(),y("code",io,O(e(s).contentType),1)):D("",!0),e(s).contentType==="application/json"?(t(),w(He,{key:2,getter:()=>({input:e(a)})},null,8,["getter"])):D("",!0),uo,co,h(ce,{n:"green"},{default:$(()=>[W(O(e(s).fetchTime)+" ms ",1)]),_:1})]),e(c)==="pdf"?(t(),y("div",po,[u("div",fo,[u("object",{data:e(a),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,mo)])])):e(c)!=="media"?(t(),w(Ge,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(a),lang:e(c)},null,8,["code","lang"])):(t(),y("div",vo,[u("div",ho,[e(s).contentType.includes("image")?(t(),y("img",{key:0,rounded:"",src:e(a)},null,8,yo)):(t(),y("video",go,[u("source",{src:e(a),type:"video/mp4"},null,8,_o)]))])]))],64)):(t(),w(Fe,{key:4},{default:$(()=>[h(v,{n:"primary",onClick:ge},{default:$(()=>[h(z,{icon:"carbon:send"}),W(" Send request ")]),_:1})]),_:1}))])}}}),ko={flex:"~ gap1","text-sm":""},xo={key:0,op50:""},Co={op50:""},wo=u("span",{op75:""},"Select a route to start",-1),$o=u("div",{p4:"",border:"b base"},[u("span",{"text-lg":""},"Default Inputs"),u("br"),u("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),qo=ae({__name:"server-routes",setup(l){const g=q(!1),d=rt(),o=$e(),{selectedRoute:b,view:k,inputDefaults:f}=Ee("serverRoutes"),m=T(()=>{!o.value&&b.value&&(o.value=b.value.filepath);const S=d.value?.find(C=>C.filepath===o.value);return o.value!==b.value?.filepath&&S&&(b.value=S),S}),s=q(""),c=T(()=>new it(d.value||[],{keys:["method","route"],shouldSort:!0})),a=T(()=>d.value?s.value?c.value.search(s.value).map(C=>C.item):d.value:[]),I=T(()=>{const S=[],C=(i,A)=>{i.routes=i.routes||[],i.routes.push(A)};return a.value.forEach(i=>{const A=i.filepath.split("/"),x=A.slice(A.indexOf("server")+1);x.length>0&&x[x.length-1].includes(".")&&x.pop();let _=null;if(x.forEach(R=>{const F=_?_.routes?.find(j=>j.route===R):S.find(j=>j.route===R);if(F)_=F;else{const j={route:R,filepath:R.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};_?C(_,j):S.push(j),_=j}}),i.type==="runtime"){const R=S.find(F=>F.route==="runtime");if(R)C(R,i);else{const F={route:"runtime",filepath:"runtime",type:"collection",routes:[i]};S.push(F)}}else _?C(_,i):S.push(i)}),S});function M(){k.value=k.value==="tree"?"list":"tree"}function H(S){return S.charAt(0).toUpperCase()+S.slice(1)}return(S,C)=>{const i=me,A=pt,x=Oe,_=bo,R=ct,F=De,j=ut,re=Le,ie=gt,ee=_t,P=Ue("tooltip");return t(),y(N,null,[h(j,{"storage-key":"tab-server-routes"},{left:$(()=>[h(A,{search:e(s),"onUpdate:search":C[1]||(C[1]=V=>Y(s)?s.value=V:null),pb2:""},{actions:$(()=>[le(h(i,{"text-lg":"",icon:e(k)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",border:!1,onClick:M},null,8,["icon"]),[[P,"Toggle View"]]),le(h(i,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",border:!1,onClick:C[0]||(C[0]=V=>g.value=!e(g))},null,512),[[P,"Default Inputs"]])]),default:$(()=>[u("div",ko,[e(s)?(t(),y("span",xo,O(e(a).length)+" matched · ",1)):D("",!0),u("span",Co,O(e(d)?.length)+" routes in total",1)])]),_:1},8,["search"]),(t(!0),y(N,null,B(e(k)==="tree"?e(I):e(a),V=>(t(),w(x,{key:V.filepath,item:V},null,8,["item"]))),128))]),right:$(()=>[(t(),w(dt,{max:10},[e(m)?(t(),w(_,{key:e(m).filepath,route:e(m),onOpenDefaultInput:C[2]||(C[2]=V=>g.value=!0)},null,8,["route"])):D("",!0)],1024)),e(m)?D("",!0):(t(),w(F,{key:0},{default:$(()=>[h(R,{px6:"",py2:""},{default:$(()=>[wo]),_:1})]),_:1}))]),_:1}),h(ee,{modelValue:e(g),"onUpdate:modelValue":C[3]||(C[3]=V=>Y(g)?g.value=V:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:C[4]||(C[4]=V=>g.value=!1)},{default:$(()=>[u("div",null,[$o,(t(!0),y(N,null,B(Object.keys(e(f)),V=>(t(),w(ie,{key:V,text:`${H(V)} ${e(f)[V].length?`(${e(f)[V].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in S?S.ServerRouteTabIcons:e(je))[V]},{default:$(()=>[h(re,{modelValue:e(f)[V],"onUpdate:modelValue":G=>e(f)[V]=G,py0:"",default:{active:!0,type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{qo as default};
